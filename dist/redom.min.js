!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.redom={})}(this,function(e){"use strict";function t(e,t){var n=p(e),r=n.tag,i=n.id,o=n.className,u=t?document.createElementNS(t,r):document.createElement(r);return i&&(u.id=i),o&&(t?u.setAttribute("class",o):u.className=o),u}function n(e,t,n){var r=b(e),u=b(t);t===u&&u.__redom_view&&(t=u.__redom_view),t!==u&&(u.__redom_view=t);var f=u.__redom_mounted,d=u.parentNode;return f&&d!==r&&o(t,u,d),null!=n?r.insertBefore(u,b(n)):r.appendChild(u),i(t,u,r,d),t}function r(e,t){var n=b(e),r=b(t);return t===r&&r.__redom_view&&(t=r.__redom_view),o(t,r,n),n.removeChild(r),t}function i(e,t,n,r){for(var i=t.__redom_lifecycle||(t.__redom_lifecycle={}),o=n===r,f=!1,d=0;d<w.length;d++){var a=w[d];!o&&e!==t&&a in e&&(i[a]=(i[a]||0)+1),i[a]&&(f=!0)}if(f){var l=n,s=!1;if((o||!s&&l&&l.__redom_mounted)&&(u(t,o?"onremount":"onmount"),s=!0),!o)for(;l;){var _=l.parentNode,c=l.__redom_lifecycle||(l.__redom_lifecycle={});for(var v in i)c[v]=(c[v]||0)+i[v];!s&&(l===document||_&&_.__redom_mounted)&&(u(l,o?"onremount":"onmount"),s=!0),l=_}}else t.__redom_mounted=!0}function o(e,t,n){var r=t.__redom_lifecycle;if(r){var i=n;for(t.__redom_mounted&&u(t,"onunmount");i;){var o=i.__redom_lifecycle||(i.__redom_lifecycle={}),f=!1;for(var d in r)o[d]&&(o[d]-=r[d]),o[d]&&(f=!0);f||(i.__redom_lifecycle=null),i=i.parentNode}}else t.__redom_mounted=!1}function u(e,t){"onmount"===t?e.__redom_mounted=!0:"onunmount"===t&&(e.__redom_mounted=!1);var n=e.__redom_lifecycle;if(n){var r=e.__redom_view,i=0;r&&r[t]&&r[t]();for(var o in n)o&&i++;if(i)for(var f=e.firstChild;f;){var d=f.nextSibling;u(f,t),f=d}}}function f(e,t,n){var r=b(e);if(void 0!==n)r.style[t]=n;else if(x(t))r.setAttribute("style",t);else for(var i in t)f(r,i,t[i])}function d(e,t,n){var r=b(e),i=r instanceof window.SVGElement;if(void 0!==n)"style"===t?f(r,n):i&&A(n)?r[t]=n:!i&&(t in r||A(n))?r[t]=n:r.setAttribute(t,n);else for(var o in t)d(r,o,t[o])}function a(e,t){for(var r=0;r<t.length;r++){var i=t[r];(0===i||i)&&("function"==typeof i?i(e):x(i)||N(i)?e.appendChild(y(i)):C(b(i))?n(e,i):i.length?a(e,i):"object"==typeof i&&d(e,i))}}function l(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];var r;if(x(e))r=k(e).cloneNode(!1);else{if(!C(e))throw new Error("At least one argument required");r=e.cloneNode(!1)}return a(r,t),r}function s(e,t){if(void 0===t.length)return s(e,[t]);for(var i=b(e).firstChild,o=0;o<t.length;o++){var u=t[o];u&&(b(u)!==i?n(e,u,i):i=i.nextSibling)}for(;i;){var f=i.nextSibling;r(e,i),i=f}}function _(e,t,n,r){return new c(e,t,n,r)}function c(e,t,n,r){this.__redom_list=!0,this.View=t,this.initData=r,this.views=[],this.el=g(e),null!=n&&(this.lookup={},this.key=A(n)?n:V(n))}function v(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];var r;if(x(e))r=T(e).cloneNode(!1);else{if(!C(e))throw new Error("At least one argument required");r=e.cloneNode(!1)}return a(r,t),r}var m="#".charCodeAt(0),h=".".charCodeAt(0),p=function(e){for(var t,n,r,i=0,o=0,u=0;u<=e.length;u++){var f=e.charCodeAt(u);if(f===m||f===h||!f){if(0===i)t=0===u?"div":f?e.substring(o,u):e;else{var d=e.substring(o,u);1===i?n=d:r?r+=" "+d:r=d}o=u+1,i=f===m?1:2}}return{tag:t,id:n,className:r}},w=["onmount","onunmount"],y=function(e){return document.createTextNode(e)},g=function(e){return x(e)?l(e):b(e)},b=function(e){return e.nodeType&&e||!e.el&&e||b(e.el)},x=function(e){return"string"==typeof e},N=function(e){return"number"==typeof e},A=function(e){return"function"==typeof e},C=function(e){return e&&e.nodeType},S={},k=function(e){return S[e]||(S[e]=t(e))};l.extend=function(e){var t=k(e);return l.bind(this,t)};var E=l,V=function(e){return function(t){return t[e]}};c.extend=function(e,t,n,r){return c.bind(c,e,t,n,r)},_.extend=c.extend,c.prototype.update=function(e){var t=this;void 0===e&&(e=[]);for(var n=this.View,i=this.key,o=null!=i,u=this.initData,f=new Array(e.length),d=this.views,a=i&&{},l=i&&this.lookup,_=0;_<e.length;_++){var c=e[_],v=void 0;if(o){var m=i(c);v=l[m]||new n(u,c,_,e),a[m]=v,v.__redom_id=m}else v=d[_]||new n(u,c,_,e);f[_]=v,b(v.el).__redom_view=v,v.update&&v.update(c,_,e)}if(o)for(var h=0;h<d.length;h++){var p=d[h].__redom_id;p in a||r(t,l[p])}s(this,f),o&&(this.lookup=a),this.views=f};var D=function(e,t,n){this.el=g(e),this.Views=t,this.initData=n};D.prototype.update=function(e,t){if(e!==this.route){var n=this.Views[e];this.view=n&&new n(this.initData,t),this.route=e,s(this.el,[this.view])}this.view&&this.view.update&&this.view.update(t,e)};var j={},T=function(e){return j[e]||(j[e]=t(e,"http://www.w3.org/2000/svg"))};v.extend=function(e){var t=T(e);return v.bind(this,t)},e.html=l,e.el=E,e.list=_,e.List=c,e.mount=n,e.unmount=r,e.router=function(e,t,n){return new D(e,t,n)},e.Router=D,e.setAttr=d,e.setStyle=f,e.setChildren=s,e.svg=v,e.text=y,Object.defineProperty(e,"__esModule",{value:!0})});