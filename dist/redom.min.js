!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.redom=e.redom||{})}(this,function(e){"use strict";function t(e,t,n){var o=e.el||e,u=t.el||t;return A(u)&&(u=u.el),t===u&&u.__redom_view&&(t=u.__redom_view),t!==u&&(u.__redom_view=t),t.isMounted&&i(t,u,o),n?o.insertBefore(u,n.el||n):o.appendChild(u),t.isMounted||(t.isMounted=!0,r(t,u,o)),t}function n(e,t){"mount"===t?e.__redom_mounted=!0:"unmount"===t&&(e.__redom_mounted=!0);var r=e.__redom_lifecycle;if(r){var i=e.__redom_view,o=0;i&&i[t]&&i[t]();for(var u in r)u&&o++;var f=e.childNodes;if(f&&o)for(var l=0;l<f.length;l++)n(f[l],t)}}function r(e,t,r){var i={},o=t.__redom_lifecycle||(t.__redom_lifecycle={});for(var u in o)i[u]||(i[u]=0),i[u]+=o[u];if(e!==t)for(var f=0;f<p.length;f++){var l=p[f];l in e&&(o[l]||(o[l]=0),o[l]++,i[l]||(i[l]=0),i[l]++)}for(var a=r;a;){var s=a.__redom_lifecycle||(a.__redom_lifecycle={});for(var d in i)s[d]||(s[d]=0),s[d]+=i[d];a===document&&n(a,"mount"),a=a.parentNode}}function i(e,t,r){var i={},o=t.__redom_lifecycle||(t.__redom_lifecycle={});for(var u in o)i[u]||(i[u]=0),i[u]+=o[u];if(e!==t)for(var f=0;f<p.length;f++){var l=p[f];l in e&&(o[l]||(o[l]=0),o[l]--)}for(var a=r;a;){var s=a.__redom_lifecycle||(a.__redom_lifecycle={});for(var d in i)s[d]||(s[d]=0),s[d]-=i[d];a===document&&n(a,"unmount"),a=a.parentNode}}function o(e,t){var n=e.el||e,r=t.el||t;return t===r&&r.__redom_view&&(t=r.__redom_view),i(t,r,n),n.removeChild(r),t}function u(e,t,n){var r=e.el||e;if(arguments.length>2)r.style[t]=n;else if(g(t))r.setAttribute("style",t);else for(var i in t)u(r,i,t[i])}function f(e,t,n){var r=e.el||e,i=r instanceof window.SVGElement;if(arguments.length>2)"style"===t?u(r,n):i&&b(n)?r[t]=n:!i&&(t in r||b(n))?r[t]=n:r.setAttribute(t,n);else for(var o in t)f(r,o,t[o])}function l(e,n){for(var r=0;r<n.length;r++){var i=n[r];i&&("function"==typeof i?i(e):g(i)||y(i)?e.appendChild(w(i)):x(i)||x(i.el)||A(i.el)?t(e,i):i.length?l(e,i):"object"==typeof i&&f(e,i))}}function a(e,t){for(var n,r,i,o=0,u=0,f=0;f<=e.length;f++){var l=e.charCodeAt(f);if(l===C||l===k||!l){if(0===o)n=0===f?"div":l?e.substring(u,f):e;else{var a=e.substring(u,f);1===o?r=a:i?i+=" "+a:i=a}u=f+1,o=l===C?1:2}}var s=t?N.createElementNS(t,n):N.createElement(n);return r&&(s.id=r),i&&(t?s.setAttribute("class",i):s.className=i),s}function s(e){for(var t=[],n=arguments.length-1;n-->0;)t[n]=arguments[n+1];var r;if(g(e))r=S(e).cloneNode(!1);else{if(!x(e))throw new Error("At least one argument required");r=e.cloneNode(!1)}return l(r,t),r}function d(e,n){if(void 0===n.length)return d(e,[n]);for(var r=e.el||e,i=r.firstChild,u=0;u<n.length;u++){var f=n[u];if(f){var l=f.el||f;A(l)&&(l=l.el),l!==i?t(e,f,i):i=i.nextSibling}}for(;i;){var a=i.nextSibling;o(e,i),i=a}}function c(e,t,n,r){return new v(e,t,n,r)}function v(e,t,n,r){this.__redom_list=!0,this.View=t,this.key=n,this.initData=r,this.views=[],this.el=_(e),n&&(this.lookup={})}function _(e){return g(e)?s(e):x(e.el)?e.el:e}function h(e,t,n){return new D(e,t,n)}function m(e){for(var t=[],n=arguments.length-1;n-->0;)t[n]=arguments[n+1];var r;if(g(e))r=q(e).cloneNode(!1);else{if(!x(e))throw new Error("At least one argument required");r=e.cloneNode(!1)}return l(r,t),r}var w=function(e){return N.createTextNode(e)},p=["mount","remount","unmount"],g=function(e){return"string"==typeof e},y=function(e){return"number"==typeof e},b=function(e){return"function"==typeof e},x=function(e){return e&&e.nodeType},A=function(e){return e&&e.__redom_list},N=document,C="#".charCodeAt(0),k=".".charCodeAt(0),E={},S=function(e){return E[e]||a(e)};s.extend=function(e){var t=S(e);return s.bind(this,t)};var V=s;v.extend=function(e,t,n,r){return v.bind(v,e,t,n,r)},c.extend=v.extend,v.prototype.update=function(e){void 0===e&&(e=[]);for(var t=this.View,n=this.key,r=b(n),i=this.initData,o=new Array(e.length),u=this.views,f=n&&{},l=n&&this.lookup,a=0;a<e.length;a++){var s=e[a],c=void 0;if(n){var v=r?n(s):s[n];c=o[a]=l[v]||new t(i,s,a,e),f[v]=c,c.__id=v}else c=o[a]=u[a]||new t(i,s,a,e);var _=c.el;_.__redom_list&&(_=_.el),_.__redom_view=c,c.update&&c.update(s,a,e)}d(this,o),n&&(this.lookup=f),this.views=o};var D=function(e,t,n){this.el=_(e),this.Views=t,this.initData=n};D.prototype.update=function(e,t){if(e!==this.route){var n=this.Views,r=n[e];this.view=r&&new r(this.initData,t),this.route=e,d(this.el,[this.view])}this.view&&this.view.update&&this.view.update(t,e)};var M="http://www.w3.org/2000/svg",j={},q=function(e){return j[e]||a(e,M)};m.extend=function(e){var t=q(e);return m.bind(this,t)},e.html=s,e.el=V,e.list=c,e.List=v,e.mount=t,e.unmount=o,e.router=h,e.Router=D,e.setAttr=f,e.setStyle=u,e.setChildren=d,e.svg=m,e.text=w,Object.defineProperty(e,"__esModule",{value:!0})});