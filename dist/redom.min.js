!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.redom=e.redom||{})}(this,function(e){"use strict";function t(e){return document.createTextNode(e)}function n(e,t){for(var n=e.el||e,o=n.firstChild,i=0;i<t.length;i++){var u=t[i];if(u){var a=u.el||u;a!==o?r(e,u,o):o=o.nextSibling}}for(;o;){var l=o.nextSibling;unmount(e,o.view||o),o=l}}function r(e,t,n){var o=e.el||e,i=t.el||t,u=i.isMounted;if(i.nodeType)return t!==i&&(i.view=t),n?o.insertBefore(i,n.el||n):o.appendChild(i),u?t.remounted&&t.remounted():(i.isMounted=!0,t.mounted&&t.mounted()),!0;if(t.length){for(var a=0;a<t.length;a++)r(e,t[a],n);return!0}return!1}function o(e,t){var n=e.el||e,r=t.el||t;n.removeChild(r),r.isMounted=!1,t.unmounted&&t.unmounted()}function i(e,t,n){if("string"==typeof t)return n?e.textContent=t:e.appendChild(document.createTextNode(t)),!1;if("function"==typeof t&&(t=t(e)),null==t)return n;if(r(e,t))return!1;for(var o in t){var i=t[o];if("style"===o)if("string"==typeof i)e.setAttribute(o,i);else{var u=e.style;for(var a in i)u[a]=i[a]}else this.allowBareProps&&o in e?e[o]=t[o]:e.setAttribute(o,t[o])}return n}function u(e){var t=this.cache;if(e in t)return t[e];for(var n,r,o,i=0,u=0,a=0,l=e.length;l>=a;a++){var f=a===l?0:e.charCodeAt(a);if(35===f||46===f||0===f){if(0===i)n=0===a?"div":0===f?e:e.substring(u,a);else{var s=e.substring(u,a);1===i?r=s:o?o+=" "+s:o=s}u=a+1,i=35===f?1:2}}var c=this.createTag(n);return r&&(c.id=r),o&&(c.className=o),t[e]=c}function a(e,t,n,r){if("function"==typeof e){var o=arguments.length;switch(o){case 1:return new e;case 2:return new e(t);case 3:return new e(t,n);case 4:return new e(t,n,r)}for(var i=new Array(o);o--;)i[o]=arguments[o];return new(e.bind.apply(e,i))}for(var u=h.createElement(e).cloneNode(!1),a=!0,l=1;l<arguments.length;l++)a=h.expand(u,arguments[l],a);return u}function l(e,t,n,r){return new f(e,t,n,r)}function f(e,t,n,r){this.View=t,this.key=n,this.initData=r,this.views=[],this.el="string"==typeof e?a(e):e,n&&(this.lookup={})}function s(e){return function(t,n){return 2===arguments.length?function(r){e(r,t,n)}:function(n){for(var r in t)e(n,r,t[r])}}}function c(e){for(var t=v.createElement(e).cloneNode(!1),n=!0,r=1;r<arguments.length;r++)n=v.expand(t,arguments[r],n);return t}function d(){}var h={cache:{},expand:i,createElement:u,allowBareProps:!0,allowComponents:!0,createTag:function(e){return document.createElement(e)}};a.extend=function(e){var t=h.createElement(e);return function(){for(var e=t.cloneNode(!1),n=!0,r=0;r<arguments.length;r++)n=h.expand(e,arguments[r],n);return e}},f.prototype.update=function(e){var t=this.View,r=this.key,o=this.initData,i=this.views,u=this.el;if(r){for(var a=this.lookup,l=0;l<e.length;l++){var f=e[l],s="function"==typeof r?r(f):f[r],c=a[s]||(a[s]=new t(o,f,l));c.update&&c.update(f),i[l]=c,a[s]=c}for(var l=e.length;l<i.length;l++){var s="function"==typeof r?r(f):f[r];a[s]=null,i[l]=null}}else{for(var l=0;l<e.length;l++){var f=e[l],c=i[l]||(i[l]=new t(o,f,l));c.update&&c.update(f)}for(var l=e.length;l<i.length;l++)i[l]=null}i.length=e.length,u&&n(u,i)};var p=s(function(e,t,n){e.addEventListener(t,function(t){n.call(e.view,t)})}),v={cache:{},expand:i,createElement:u,allowBareProps:!1,allowComponents:!1,createTag:function(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}};c.extend=function(e){var t=v.createElement(e);return function(){for(var e=t.cloneNode(!1),n=!0,r=0;r<arguments.length;r++)n=v.expand(e,arguments[r],n);return e}},d.prototype.on=function(e,t){this.el.addEventListener(e,function(e){t(e.detail,e)})},d.prototype.dispatch=function(e,t){this.el.dispatchEvent(new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:t}))},d.prototype.mount=function(e){r(e,this)},e.el=a,e.list=l,e.List=f,e.mount=r,e.unmount=o,e.on=p,e.text=t,e.setChildren=n,e.svg=c,e.View=d,Object.defineProperty(e,"__esModule",{value:!0})});