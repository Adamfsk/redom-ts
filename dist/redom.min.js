!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n(e.redom=e.redom||{})}(this,function(e){"use strict";function n(e){return document.createTextNode(e)}function t(e,n){for(var t=e.el||e,i=t.firstChild,o=0;o<n.length;o++){var u=n[o];if(u){var a=u.el||u;a!==i?r(e,u,i):i=i.nextSibling}}for(;i;){var l=i.nextSibling;unmount(e,i.view||i),i=l}}function r(e,n,t){var i=e.el||e,u=n.el||n,a=u.mounted;if(u.nodeType)return n!==u&&(u.view=n),a&&n.remount&&n.remount(),t?i.insertBefore(u,t.el||t):i.appendChild(u),a||!i.mounted&&!document.contains(u)||(u.mounted=!0,n.mount&&n.mount(),o(u)),!0;if(n.length){for(var l=0;l<n.length;l++)r(e,n[l],t);return!0}return!1}function i(e,n){var t=e.el||e,r=n.el||n;t.removeChild(r),r.mounted=!1,n.unmount&&n.unmount(),u(r)}function o(e){for(var n=e.firstChild;n;){if(n.mounted)return;n.mounted=!0,n.view&&n.view.mount&&n.view.mount(),o(n),n=n.nextSibling}}function u(e){for(var n=e.firstChild;n;){if(!n.mounted)return;n.mounted=!1,n.view&&n.view.unmount&&n.view.unmount(),u(n),n=n.nextSibling}}function a(e,n,t){if("string"==typeof n)return t?e.textContent=n:e.appendChild(document.createTextNode(n)),!1;if("function"==typeof n&&(n=n(e)),null==n)return t;if(r(e,n))return!1;for(var i in n){var o=n[i];if("style"===i)if("string"==typeof o)e.setAttribute(i,o);else{var u=e.style;for(var a in o)u[a]=o[a]}else this.allowBareProps&&i in e?e[i]=n[i]:e.setAttribute(i,n[i])}return t}function l(e){var n=this.cache;if(e in n)return n[e];for(var t,r,i,o=0,u=0,a=0,l=e.length;l>=a;a++){var f=a===l?0:e.charCodeAt(a);if(35===f||46===f||0===f){if(0===o)t=0===a?"div":0===f?e:e.substring(u,a);else{var c=e.substring(u,a);1===o?r=c:i?i+=" "+c:i=c}u=a+1,o=35===f?1:2}}var s=this.createTag(t);return r&&(s.id=r),i&&(s.className=i),n[e]=s}function f(e,n,t,r){if("function"==typeof e){var i=arguments.length;switch(i){case 1:return new e;case 2:return new e(n);case 3:return new e(n,t);case 4:return new e(n,t,r)}for(var o=new Array(i);i--;)o[i]=arguments[i];return new(e.bind.apply(e,o))}for(var u=h.createElement(e).cloneNode(!1),a=!0,l=1;l<arguments.length;l++)a=h.expand(u,arguments[l],a);return u}function c(e,n,t,r){return new s(e,n,t,r)}function s(e,n,t,r){this.View=n,this.key=t,this.initData=r,this.views=[],this.el="string"==typeof e?f(e):e,t&&(this.lookup={})}function d(e){return function(n,t){return 2===arguments.length?function(r){e(r,n,t)}:function(t){for(var r in n)e(t,r,n[r])}}}function v(e){for(var n=p.createElement(e).cloneNode(!1),t=!0,r=1;r<arguments.length;r++)t=p.expand(n,arguments[r],t);return n}function m(e){return function(n,t,r){var i=Object.create(e),o=arguments.length;switch(o){case 0:e.init.call(i);break;case 1:e.init.call(i,n);break;case 2:e.init.call(i,n,t);break;case 3:e.init.call(i,n,t,r);break;default:for(var u=new Array(o),a=0;o>a;)e.init.apply(i,u)}return i}}var h={cache:{},expand:a,createElement:l,allowBareProps:!0,allowComponents:!0,createTag:function(e){return document.createElement(e)}};f.extend=function(e){var n=h.createElement(e);return function(){for(var e=n.cloneNode(!1),t=!0,r=0;r<arguments.length;r++)t=h.expand(e,arguments[r],t);return e}},s.prototype.update=function(e){var n=this.View,r=this.key,i=this.initData,o=this.views,u=this.el;if(r){for(var a=this.lookup,l=0;l<e.length;l++){var f=e[l],c="function"==typeof r?r(f):f[r],s=a[c]||(a[c]=new n(i,f,l));s.update&&s.update(f),o[l]=s,a[c]=s}for(var l=e.length;l<o.length;l++){var c="function"==typeof r?r(f):f[r];a[c]=null,o[l]=null}}else{for(var l=0;l<e.length;l++){var f=e[l],s=o[l]||(o[l]=new n(i,f,l));s.update&&s.update(f)}for(var l=e.length;l<o.length;l++)o[l]=null}o.length=e.length,u&&t(u,o)};var g=d(function(e,n,t){e.addEventListener(n,function(n){t.call(e.view,n)})}),p={cache:{},expand:a,createElement:l,allowBareProps:!1,allowComponents:!1,createTag:function(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}};v.extend=function(e){var n=p.createElement(e);return function(){for(var e=n.cloneNode(!1),t=!0,r=0;r<arguments.length;r++)t=p.expand(e,arguments[r],t);return e}},e.el=f,e.list=c,e.List=s,e.mount=r,e.unmount=i,e.on=g,e.text=n,e.setChildren=t,e.svg=v,e.view=m,Object.defineProperty(e,"__esModule",{value:!0})});