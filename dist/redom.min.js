!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.redom={})}(this,function(e){"use strict";var t="#".charCodeAt(0),n=".".charCodeAt(0),i=function(e,i){for(var r,o,u,l=0,s=0,f=0;f<=e.length;f++){var d=e.charCodeAt(f);if(d===t||d===n||!d){if(0===l)r=0===f?"div":d?e.substring(s,f):e;else{var a=e.substring(s,f);1===l?o=a:u?u+=" "+a:u=a}s=f+1,l=d===t?1:2}}var _=i?document.createElementNS(i,r):document.createElement(r);return o&&(_.id=o),u&&(i?_.setAttribute("class",u):_.className=u),_},r=["onmount","onunmount"],o=function(e,t,n){var i=h(e),r=h(t);t===r&&r.__redom_view&&(t=r.__redom_view),t!==r&&(r.__redom_view=t);var o=r.__redom_mounted,u=r.parentNode;return o&&u!==i&&s(t,r,u),null!=n?i.insertBefore(r,h(n)):i.appendChild(r),l(t,r,i,u),t},u=function(e,t){var n=h(e),i=h(t);return t===i&&i.__redom_view&&(t=i.__redom_view),s(t,i,n),n.removeChild(i),t},l=function(e,t,n,i){for(var o=t.__redom_lifecycle||(t.__redom_lifecycle={}),u=n===i,l=!1,s=0;s<r.length;s++){var d=r[s];!u&&e!==t&&d in e&&(o[d]=(o[d]||0)+1),o[d]&&(l=!0)}if(l){var a=n,_=!1;if((u||!_&&a&&a.__redom_mounted)&&(f(t,u?"onremount":"onmount"),_=!0),!u)for(;a;){var v=a.parentNode,c=a.__redom_lifecycle||(a.__redom_lifecycle={});for(var h in o)c[h]=(c[h]||0)+o[h];!_&&(a===document||v&&v.__redom_mounted)&&(f(a,u?"onremount":"onmount"),_=!0),a=v}}else t.__redom_mounted=!0},s=function(e,t,n){var i=t.__redom_lifecycle;if(i){var r=n;for(t.__redom_mounted&&f(t,"onunmount");r;){var o=r.__redom_lifecycle||(r.__redom_lifecycle={}),u=!1;for(var l in i)o[l]&&(o[l]-=i[l]),o[l]&&(u=!0);u||(r.__redom_lifecycle=null),r=r.parentNode}}else t.__redom_mounted=!1},f=function(e,t){"onmount"===t?e.__redom_mounted=!0:"onunmount"===t&&(e.__redom_mounted=!1);var n=e.__redom_lifecycle;if(n){var i=e.__redom_view,r=0;i&&i[t]&&i[t]();for(var o in n)o&&r++;if(r)for(var u=e.firstChild;u;){var l=u.nextSibling;f(u,t),u=l}}},d=function(e,t,n){var i=h(e);if(void 0!==n)i.style[t]=n;else if(m(t))i.setAttribute("style",t);else for(var r in t)d(i,r,t[r])},a=function(e,t,n){var i=h(e),r=i instanceof window.SVGElement;if(void 0!==n)"style"===t?d(i,n):r&&w(n)?i[t]=n:!r&&(t in i||w(n))?i[t]=n:i.setAttribute(t,n);else for(var o in t)a(i,o,t[o])},_=function(e){return document.createTextNode(e)},v=function(e,t){for(var n=0;n<t.length;n++){var i=t[n];(0===i||i)&&("function"==typeof i?i(e):m(i)||p(i)?e.appendChild(_(i)):y(h(i))?o(e,i):i.length?v(e,i):"object"==typeof i&&a(e,i))}},c=function(e){return m(e)?x(e):h(e)},h=function(e){return e.nodeType&&e||!e.el&&e||h(e.el)},m=function(e){return"string"==typeof e},p=function(e){return"number"==typeof e},w=function(e){return"function"==typeof e},y=function(e){return e&&e.nodeType},g={},b=function(e){return g[e]||(g[e]=i(e))},x=function(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];var i;if(m(e))i=b(e).cloneNode(!1);else{if(!y(e))throw new Error("At least one argument required");i=e.cloneNode(!1)}return v(i,t),i};x.extend=function(e){var t=b(e);return x.bind(this,t)};var N=x,A=function(e,t){if(void 0===t.length)return A(e,[t]);for(var n=h(e).firstChild,i=0;i<t.length;i++){var r=t[i];r&&(h(r)!==n?o(e,r,n):n=n.nextSibling)}for(;n;){var l=n.nextSibling;u(e,n),n=l}},C=function(e){return function(t){return t[e]}},V=function(e,t,n,i){return new D(e,t,n,i)},D=function(e,t,n,i){this.__redom_list=!0,this.View=t,this.initData=i,this.views=[],this.el=c(e),null!=n&&(this.lookup={},this.key=w(n)?n:C(n))};D.prototype.update=function(e){var t=this;void 0===e&&(e=[]);for(var n=this.View,i=this.key,r=null!=i,o=this.initData,l=new Array(e.length),s=this.views,f=i&&{},d=i&&this.lookup,a=0;a<e.length;a++){var _=e[a],v=void 0;if(r){var c=i(_);v=l[a]=d[c]||new n(o,_,a,e),f[c]=v,v.__id=c}else v=l[a]=s[a]||new n(o,_,a,e);h(v.el).__redom_view=v,v.update&&v.update(_,a,e)}if(r)for(var m=0;m<s.length;m++){var p=s[m].__id;p in f||u(t,d[p])}A(this,l),r&&(this.lookup=f),this.views=l},D.extend=function(e,t,n,i){return D.bind(D,e,t,n,i)},V.extend=D.extend;var S=function(e,t){this.el=_(""),this.visible=!1,this.view=null,this._placeholder=this.el,this._View=e,this._initData=t};S.prototype.update=function(e,t){var n=this._placeholder,i=this.el.parentNode;if(e){if(!this.visible){var r=new(0,this._View)(this._initData);this.el=h(r.el),this.view=r,o(i,this.el,n),u(i,n)}this.view.update&&this.view.update(t)}else this.visible&&(o(i,n,this.el),u(i,this.el),this.el=n,this.view=null);this.visible=e};var k=function(e,t,n){this.el=c(e),this.Views=t,this.initData=n};k.prototype.update=function(e,t){if(e!==this.route){var n=this.Views[e];this.view=n&&new n(this.initData,t),this.route=e,A(this.el,[this.view])}this.view&&this.view.update&&this.view.update(t,e)};var E={},j=function(e){return E[e]||(E[e]=i(e,"http://www.w3.org/2000/svg"))},T=function(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];var i;if(m(e))i=j(e).cloneNode(!1);else{if(!y(e))throw new Error("At least one argument required");i=e.cloneNode(!1)}return v(i,t),i};T.extend=function(e){var t=j(e);return T.bind(this,t)},e.html=x,e.el=N,e.list=V,e.List=D,e.mount=o,e.unmount=u,e.place=function(e,t){return new S(e,t)},e.Place=S,e.router=function(e,t,n){return new k(e,t,n)},e.Router=k,e.setAttr=a,e.setStyle=d,e.setChildren=A,e.svg=T,e.text=_,Object.defineProperty(e,"__esModule",{value:!0})});